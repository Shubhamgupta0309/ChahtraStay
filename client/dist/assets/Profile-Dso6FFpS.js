import{r,j as e,u as U,L as E,a as m}from"./index-CbzP6hy5.js";import{T as L,t as C}from"./toaster-CnzL-6es.js";import{H as _,A as H,a as D,b as V}from"./Header-CuRLoS_H.js";import{C as j,b as z}from"./card-BI2sKOiD.js";import{a as b,c as d,B as k}from"./createLucideIcon-AdlLZUEa.js";import{F as O}from"./Footer-BEXvCSXr.js";import{S as $,a as q,b as W,c as Z,d as x}from"./select-CyxRNjYH.js";import{P as J,a as G,S as K,b as Q}from"./popover-DGZhbwlO.js";import{L as g}from"./label-D0bADn3j.js";import{I as N}from"./input-XUYr8Ntf.js";import{M as X,P as Y,U as ee,C as P}from"./user-DHnWdNNR.js";import{B as se,C as ae}from"./clock-DBW-vuoa.js";import{B as te}from"./bed-double-D0BcJGZ9.js";import"./house-c3-BPOGx.js";import"./index-DYIKVHMg.js";import"./chevron-down-BxKGjAz6.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],re=b("AppWindow",le);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M8 8h8",key:"1bis0t"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m13 17-5-1h1a4 4 0 0 0 0-8",key:"nu2bwa"}]],ce=b("BadgeIndianRupee",oe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M8 7h8",key:"i86dvs"}],["path",{d:"M12 17.5 8 15h1a4 4 0 0 0 0-8",key:"grpkl4"}],["path",{d:"M8 11h8",key:"vwpz6n"}]],ie=b("ReceiptIndianRupee",ne),R=r.forwardRef(({className:s,...t},l)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:l,className:d("w-full caption-bottom text-sm",s),...t})}));R.displayName="Table";const T=r.forwardRef(({className:s,...t},l)=>e.jsx("thead",{ref:l,className:d("[&_tr]:border-b",s),...t}));T.displayName="TableHeader";const S=r.forwardRef(({className:s,...t},l)=>e.jsx("tbody",{ref:l,className:d("[&_tr:last-child]:border-0",s),...t}));S.displayName="TableBody";const de=r.forwardRef(({className:s,...t},l)=>e.jsx("tfoot",{ref:l,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));de.displayName="TableFooter";const w=r.forwardRef(({className:s,...t},l)=>e.jsx("tr",{ref:l,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));w.displayName="TableRow";const n=r.forwardRef(({className:s,...t},l)=>e.jsx("th",{ref:l,className:d("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t}));n.displayName="TableHead";const i=r.forwardRef(({className:s,...t},l)=>e.jsx("td",{ref:l,className:d("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t}));i.displayName="TableCell";const xe=r.forwardRef(({className:s,...t},l)=>e.jsx("caption",{ref:l,className:d("mt-4 text-sm text-muted-foreground",s),...t}));xe.displayName="TableCaption";function Te(){var y;const[s,t]=r.useState({}),[l,I]=r.useState([]),[p,B]=r.useState("all"),[h,v]=r.useState({name:"",email:"",phone:"",password:"",isPasswordChanged:!1});U(),r.useEffect(()=>{(async()=>{try{const o=await m.get("/api/user/profile");t(o.data.userData);const c=await m.get("/api/booking/my-bookings");I(c.data||[])}catch(o){console.error("Error fetching user profile or bookings:",o)}})()},[]);const F=l.filter(a=>p==="all"||a.status===p),M=a=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"})[a]||"bg-gray-100 text-gray-800",A=async()=>{try{const a=Object.fromEntries(Object.entries(h).filter(([o,c])=>o!=="isPasswordChanged"&&c!==""&&c!=="*******"));if(h.isPasswordChanged||delete a.password,Object.keys(a).length>0){const o=await m.patch("/api/user/update",a);C({title:"Profile updated successfully"});const c=await m.get("/api/user/profile");t(c.data.userData),v(u=>({...u,password:"*******",isPasswordChanged:!1}))}}catch(a){C({title:a.message||"Failed to update",description:"Please retry to update profile",variant:"destructive"})}},f=a=>{const{id:o,value:c}=a.target;v(u=>({...u,[o]:c,...o==="password"&&c!=="*******"?{isPasswordChanged:!0}:{}}))};return s?e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[e.jsx(L,{}),e.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-10",children:e.jsx(_,{})}),e.jsx("section",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white py-12 md:py-20",children:e.jsxs("div",{className:"container mx-auto px-6 flex flex-col items-center",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-center",children:[s==null?void 0:s.name,"'s Profile"]}),e.jsx("div",{className:"mt-6",children:e.jsxs(H,{className:"w-40 h-40 mx-auto",children:[e.jsx(D,{src:(s==null?void 0:s.avatar)||"/icon.png",alt:(s==null?void 0:s.name)||"U"}),e.jsx(V,{className:"bg-purple-100 text-purple-600",children:((y=s==null?void 0:s.name)==null?void 0:y.charAt(0))||"U"})]})})]})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-6 md:px-12",children:e.jsx(j,{className:"shadow-xl rounded-lg overflow-hidden",children:e.jsx(z,{children:e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex flex-col md:flex-row items-start md:space-x-8",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flow-row justify-between p-2 ",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Personal Information"}),e.jsxs(J,{children:[e.jsx(G,{asChild:!0,children:e.jsxs(k,{className:"rounded-full hover:bg-purple-800 shadow-xl active:scale-90 hover:text-white transition-all divide-purple-600 ease-in hover:cursor-pointer",children:[e.jsx(K,{})," Update Profile"]})}),e.jsx(Q,{className:"w-100",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium leading-none",children:"Update Profile"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter the details which you want to update only"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(g,{htmlFor:"name",children:"Name"}),e.jsx(N,{id:"name",defaultValue:s==null?void 0:s.name,className:"col-span-2 h-8",onChange:f})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(g,{htmlFor:"phone",children:"Phone"}),e.jsx(N,{id:"phone",defaultValue:s==null?void 0:s.phone,className:"col-span-2 h-8",onChange:f})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(g,{htmlFor:"password",children:"Password"}),e.jsx(N,{id:"password",value:h.password,type:"password",className:"col-span-2 h-8",onChange:f,placeholder:"Enter new password"})]}),e.jsx(k,{onClick:A,className:"rounded-full p-2 m-2 w-1/2 mx-auto bg-purple-500 hover:bg-purple-900",children:"Update"})]})]})})]})]}),e.jsxs("div",{className:"mt-4 text-gray-700 flex flex-row space-x-2",children:[e.jsxs("p",{className:"font-semibold flex flex-row",children:[e.jsx(X,{className:"mx-2 w-4 text-purple-800"})," Email:"]}),e.jsx("p",{children:s.email})]}),e.jsxs("div",{className:"mt-4 text-gray-700 flex flex-row space-x-2",children:[e.jsxs("p",{className:"font-semibold flex flex-row",children:[e.jsx(Y,{className:"mx-2 w-4 text-purple-800"})," Phone:"]}),e.jsx("p",{children:s.phone?s.phone:"NA"})]}),e.jsxs("div",{className:"mt-4 text-gray-700 flex flex-row space-x-2",children:[e.jsxs("p",{className:"font-semibold flex flex-row",children:[e.jsx(ee,{className:"mx-2 w-4 text-purple-800"})," Role:"]}),e.jsx("p",{children:s.role})]}),e.jsxs("div",{className:"mt-4 text-gray-700 flex flex-row space-x-2",children:[e.jsxs("p",{className:"font-semibold flex flex-row",children:[e.jsx(re,{className:"mx-2 w-4 text-purple-800"})," ","Joined:"]}),e.jsx("p",{children:new Date(s.createdAt).toLocaleDateString()})]})]})})})})})})}),e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-6 md:px-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"My Bookings"}),e.jsxs($,{value:p,onValueChange:B,children:[e.jsx(q,{className:"w-[180px]",children:e.jsx(W,{placeholder:"Filter by status"})}),e.jsxs(Z,{children:[e.jsx(x,{value:"all",children:"All Bookings"}),e.jsx(x,{value:"pending",children:"Pending"}),e.jsx(x,{value:"confirmed",children:"Confirmed"}),e.jsx(x,{value:"cancelled",children:"Cancelled"}),e.jsx(x,{value:"completed",children:"Completed"})]})]})]}),l.length===0?e.jsx(j,{className:"p-6",children:e.jsx("p",{className:"text-gray-700 text-center",children:"No bookings found."})}):e.jsx(j,{children:e.jsxs(R,{children:[e.jsx(T,{children:e.jsxs(w,{children:[e.jsxs(n,{className:"text-purple-500 hover:text-purple-900",children:[e.jsx(ie,{className:"w-4 h-4 inline mr-2 "}),"Receipt ID"]}),e.jsxs(n,{className:"text-purple-500 hover:text-purple-900",children:[e.jsx(se,{className:"w-4 h-4 inline mr-2 "}),"Hostel"]}),e.jsxs(n,{className:"text-purple-500 hover:text-purple-900",children:[e.jsx(te,{className:"w-4 h-4 inline mr-2"}),"Room"]}),e.jsxs(n,{className:"text-purple-500 hover:text-purple-900",children:[e.jsx(P,{className:"w-4 h-4 inline mr-2"}),"Check-in"]}),e.jsxs(n,{className:"text-purple-500 hover:text-purple-900",children:[e.jsx(P,{className:"w-4 h-4 inline mr-2"}),"Check-out"]}),e.jsxs(n,{className:"text-purple-500 hover:text-purple-900",children:[e.jsx(ce,{className:"w-4 h-4 inline mr-2"}),"Amount"]}),e.jsxs(n,{className:"text-purple-500 hover:text-purple-900",children:[e.jsx(ae,{className:"w-4 h-4 inline mr-2"}),"Status"]})]})}),e.jsx(S,{children:F.map(a=>e.jsxs(w,{children:[e.jsx(i,{children:a.receiptId}),e.jsx(i,{className:"font-medium",children:a.hostelId}),e.jsx(i,{children:a.roomSelection}),e.jsx(i,{children:new Date(a.checkInDate).toLocaleDateString()}),e.jsx(i,{children:new Date(a.checkOutDate).toLocaleDateString()}),e.jsxs(i,{children:["â‚¹",a.amount]}),e.jsx(i,{children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${M(a.status)}`,children:a.status})})]},a.receiptId))})]})})]})}),e.jsx(O,{})]}):e.jsx(E,{})}export{Te as default};
